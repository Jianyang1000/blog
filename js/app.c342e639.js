(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(n,e,t){n.exports=t("56d7")},"0f9a":function(n,e,t){"use strict";t.r(e);t("b0c0"),t("d3b7"),t("498a"),t("96cf");var r=t("1da1"),a=t("c24f"),c=t("5f87"),o=t("a18c"),i={token:Object(c["a"])(),name:"",avatar:"",introduction:"",roles:[]},u={SET_TOKEN:function(n,e){n.token=e},SET_INTRODUCTION:function(n,e){n.introduction=e},SET_NAME:function(n,e){n.name=e},SET_AVATAR:function(n,e){n.avatar=e},SET_ROLES:function(n,e){n.roles=e}},d={login:function(n,e){var t=n.commit,r=e.username,o=e.password;return new Promise((function(n,e){Object(a["a"])({username:r.trim(),password:o}).then((function(e){var r=e.data;t("SET_TOKEN",r.token),Object(c["c"])(r.token),n(e)})).catch((function(n){e(n)}))}))},getInfo:function(n){var e=n.commit,t=n.state;return new Promise((function(n,r){Object(a["d"])(t.token).then((function(t){var a=t.data;a||r("Verification failed, please Login again.");var c=a.roles,o=a.name,i=a.avatar,u=a.introduction;(!c||c.length<=0)&&r("getInfo: roles must be a non-null array!"),e("SET_ROLES",c),e("SET_NAME",o),e("SET_AVATAR",i),e("SET_INTRODUCTION",u),n(a)})).catch((function(n){r(n)}))}))},logout:function(n){var e=n.commit;n.state,n.dispatch;e("SET_TOKEN",""),e("SET_ROLES",[]),Object(c["b"])(),Object(o["c"])(),o["b"].push({path:"/login",query:{redirect:"/"}})},resetToken:function(n){var e=n.commit;return new Promise((function(n){e("SET_TOKEN",""),e("SET_ROLES",[]),Object(c["b"])(),n()}))},changeRoles:function(n,e){var t=n.commit,a=n.dispatch;return new Promise(function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(r){var i,u,d,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e+"-token",t("SET_TOKEN",i),Object(c["c"])(i),n.next=5,a("getInfo");case 5:return u=n.sent,d=u.roles,Object(o["c"])(),n.next=10,a("permission/generateRoutes",d,{root:!0});case 10:s=n.sent,o["b"].addRoutes(s),a("tagsView/delAllViews",null,{root:!0}),r();case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}};e["default"]={namespaced:!0,state:i,mutations:u,actions:d}},4360:function(n,e,t){"use strict";t("13d5"),t("d3b7"),t("ac1f"),t("5319"),t("ddb0");var r=t("8bbf"),a=t.n(r),c=t("5880"),o=t.n(c),i=(t("b0c0"),{sidebar:function(n){return n.app.sidebar},size:function(n){return n.app.size},device:function(n){return n.app.device},token:function(n){return n.user.token},avatar:function(n){return n.user.avatar},name:function(n){return n.user.name},introduction:function(n){return n.user.introduction},roles:function(n){return n.user.roles},articleMenu:function(n){return n.app.articleMenu}}),u=i;a.a.use(o.a);var d=t("c653"),s=d.keys().reduce((function(n,e){var t=e.replace(/^\.\/(.*)\.\w+$/,"$1"),r=d(e);return n[t]=r.default,n}),{}),l=new o.a.Store({modules:s,getters:u});e["a"]=l},"56d7":function(n,e,t){"use strict";t.r(e);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("8bbf"),a=t.n(r),c=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},o=[],i=(t("5c0b"),t("2877")),u={},d=Object(i["a"])(u,c,o,!1,null,null,null),s=d.exports,l=t("a18c"),m=t("4360"),f=t("cebe"),h=t.n(f),p=t("b2d8"),b=t.n(p),g=(t("64e1"),t("4160"),t("159b"),t("1487")),v=t.n(g),T=(t("eba2"),{install:function(n,e){n.directive("highlight",(function(n){var e=n.querySelectorAll("pre code");e.forEach((function(n){v.a.highlightBlock(n)}))}))}}),k=T,O=t("94d3"),E=t.n(O),x=t("77ed"),j=t.n(x);a.a.prototype.$http=h.a,a.a.use(j.a),a.a.use(b.a),a.a.use(k),a.a.use(E.a),a.a.config.productionTip=!1,new a.a({router:l["b"],store:m["a"],render:function(n){return n(s)}}).$mount("#app")},5880:function(n,e){n.exports=Vuex},"5c0b":function(n,e,t){"use strict";var r=t("9c0c"),a=t.n(r);a.a},"5f72":function(n,e){n.exports=ELEMENT},"5f87":function(n,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"c",(function(){return i})),t.d(e,"b",(function(){return u}));var r=t("a78e"),a=t.n(r),c="Jianyang-Token";function o(){return a.a.get(c)}function i(n){return a.a.set(c,n)}function u(){return a.a.remove(c)}},6389:function(n,e){n.exports=VueRouter},"8bbf":function(n,e){n.exports=Vue},"94d3":function(n,e){},"9c0c":function(n,e,t){},a18c:function(n,e,t){"use strict";t("99af");var r=t("2909"),a=t("8bbf"),c=t.n(a),o=t("6389"),i=t.n(o),u=(t("d3b7"),function(){return t.e("chunk-35e92afd").then(t.bind(null,"c1f7"))}),d=function(){return t.e("chunk-0b64a0a8").then(t.bind(null,"717f"))},s=function(){return t.e("chunk-1995c048").then(t.bind(null,"edb6"))},l=function(){return t.e("chunk-2d0cebfb").then(t.bind(null,"617a"))},m=function(){return t.e("chunk-0bdada98").then(t.bind(null,"faa7"))},f=function(){return t.e("chunk-3dd690fa").then(t.bind(null,"31bf"))},h=function(){return t.e("chunk-074d6724").then(t.bind(null,"3952"))},p=function(){return t.e("chunk-6893ebdb").then(t.bind(null,"032d"))},b=function(){return t.e("chunk-b8263412").then(t.bind(null,"5cff"))},g=function(){return t.e("chunk-05d6ba00").then(t.bind(null,"1d90"))},v=function(){return t.e("chunk-45883a8c").then(t.bind(null,"089f"))},T=function(){return t.e("chunk-cebb44e0").then(t.bind(null,"dfd4"))},k=function(){return t.e("chunk-27c0c39e").then(t.bind(null,"e378"))},O=[{path:"/admin/login",name:"Login",component:s,hidden:!0},{path:"/admin/404",name:"404",component:l,hidden:!0},{path:"/admin/",name:"AdminHome",component:u,redirect:"/admin/index",children:[{path:"index",name:"Dashboard",component:d,meta:{title:"首页",icon:"el-icon-s-data"}}]},{path:"/admin/personal",name:"Personal",component:u,redirect:"/admin/personal/index",children:[{path:"index",name:"Personal-home",component:m,meta:{title:"个人中心"},hidden:!0}]},{path:"/admin/driver",name:"Driver",component:u,redirect:"/admin/driver/index",children:[{path:"index",name:"Driver-home",component:f,meta:{title:"引导指南",icon:"el-icon-s-flag"}}]},{path:"/admin/article",name:"Article",component:u,redirect:"/admin/article/add",meta:{title:"文章",icon:"el-icon-tickets"},children:[{path:"add",name:"Add article",component:h,meta:{title:"写文章",icon:"el-icon-edit"}},{path:"manage",name:"Manage article",component:p,meta:{title:"文章管理",icon:"el-icon-s-management"}},{path:"delete",name:"Delete article",component:b,meta:{title:"回收站",icon:"el-icon-delete"}}]},{path:"/admin/article_detail",name:"article_detail_blog",component:u,redirect:"/admin/article_detail/index",children:[{path:"index",name:"article_detail",component:g,meta:{title:"文章详情"},hidden:!0}]},{path:"/admin/tag",name:"Tag",component:u,redirect:"/admin/tag/index",children:[{path:"index",name:"Manage Tag",component:v,meta:{title:"分类/标签",icon:"el-icon-collection-tag"}}]},{path:"/admin/comment",name:"Comment",component:u,redirect:"/admin/comment/index",children:[{path:"index",name:"Manage Comment",component:T,meta:{title:"评论",icon:"el-icon-chat-line-round"}}]},{path:"/admin/user",name:"User",component:u,redirect:"/admin/user/index",children:[{path:"index",name:"Manage User",component:k,meta:{title:"用户",icon:"el-icon-user"}}]}],E=function(){return t.e("chunk-255db607").then(t.bind(null,"ba65"))},x=function(){return t.e("chunk-37baf4b3").then(t.bind(null,"0dc0"))},j=function(){return t.e("chunk-5a2b72df").then(t.bind(null,"8695"))},S=function(){return t.e("chunk-e29a5434").then(t.bind(null,"fa47"))},w=function(){return t.e("chunk-866eceba").then(t.bind(null,"fbbc"))},_=function(){return t.e("chunk-e3c27ac4").then(t.bind(null,"40d7"))},A=[{path:"/",name:"BlogHome",component:E,redirect:"/home",children:[{path:"home",name:"Blog-Home",component:x}]},{path:"/tag",name:"BlogTag",component:E,redirect:"/tag/index",children:[{path:"index",name:"Blog-Tag",component:j}]},{path:"/about",name:"BlogAbout",component:E,redirect:"/about/index",children:[{path:"index",name:"Blog-About",component:S}]},{path:"/archives",name:"BlogArchives",component:E,redirect:"/archives/index",children:[{path:"index",name:"Blog-Archives",component:w}]},{path:"/article",name:"BlogArticle",component:E,redirect:"/article/index",children:[{path:"index",name:"Blog-Article",component:_}]}];t.d(e,"a",(function(){return R})),t.d(e,"c",(function(){return B})),c.a.use(i.a);var M=Object(r["a"])(A),R=Object(r["a"])(O),N=function(){return new i.a({routes:R,scrollBehavior:function(){return{x:0,y:0}}})};function B(){var n=N();y.matcher=n.matcher}var y=new i.a({routes:[].concat(Object(r["a"])(R),Object(r["a"])(M))});e["b"]=y},b775:function(n,e,t){"use strict";t("d3b7"),t("ac1f"),t("5319");var r=t("cebe"),a=t.n(r),c=t("5f72"),o=t("4360"),i=t("5f87"),u=t("a18c"),d=a.a.create({timeout:5e3});d.interceptors.request.use((function(n){return o["a"].getters.token&&(n.headers["authorization"]=Object(i["a"])()),n}),(function(n){return console.log(n),Promise.reject(n)})),d.interceptors.response.use((function(n){var e=n.data;return 2e4===e.code||2e4!==e.code&&void 0!==e.key?e:(50008!==e.code&&50012!==e.code&&50014!==e.code||c["MessageBox"].confirm("登陆失效，请重新登陆","登陆失效",{confirmButtonText:"重新登陆",type:"warning"}).then((function(){o["a"].dispatch("user/resetToken").then((function(){u["b"].replace({path:"/admin/login"})}))})),Promise.reject(e.message||"Error"))}),(function(n){return console.log("err"+n),Object(c["Message"])({message:n.message,type:"error",duration:5e3}),Promise.reject(n)})),e["a"]=d},c24f:function(n,e,t){"use strict";t.d(e,"e",(function(){return a})),t.d(e,"a",(function(){return c})),t.d(e,"d",(function(){return o})),t.d(e,"c",(function(){return i})),t.d(e,"f",(function(){return u})),t.d(e,"b",(function(){return d}));var r=t("b775");function a(){return Object(r["a"])({url:"/api/user",method:"get"})}function c(n){return Object(r["a"])({url:"/api/user/login",method:"post",data:n})}function o(n){return Object(r["a"])({url:"/api/user/info",method:"get",params:{token:n}})}function i(n){return Object(r["a"])({url:"/api/user/".concat(n),method:"delete"})}function u(n){return Object(r["a"])({url:"/api/user/".concat(n._id),method:"put",data:n})}function d(n){return Object(r["a"])({url:"/api/user",method:"post",data:n})}},c653:function(n,e,t){var r={"./app.js":"d9cd","./user.js":"0f9a"};function a(n){var e=c(n);return t(e)}function c(n){if(!t.o(r,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return r[n]}a.keys=function(){return Object.keys(r)},a.resolve=c,n.exports=a,a.id="c653"},cebe:function(n,e){n.exports=axios},d9cd:function(n,e,t){"use strict";t.r(e);var r=t("2909"),a=(t("a78e"),t("a18c")),c={opend:!1,routes:a["a"],message:!1,articleMenu:!1,articleMenuSource:[],articleMenuTag:"1.",showRightNav:!1,qiniuToken:""},o={toggleOpen:function(n,e){n.opend=e},SET_ROUTES:function(n,e){n.routes=Object(r["a"])(e),n.addRoutes=e},SET_MESSAGE:function(n){n.message=!n.message}},i={setArticleMenu:function(n,e){n.state.articleMenu=e},setArticleMenuSource:function(n,e){n.state.articleMenuSource=e},setArticleMenuTag:function(n,e){n.state.articleMenuTag=e},setShowRightNav:function(n,e){n.state.showRightNav=e}};e["default"]={namespaced:!0,state:c,mutations:o,actions:i}}},[[0,"runtime","chunk-vendors"]]]);