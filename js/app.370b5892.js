(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,n,t){e.exports=t("56d7")},"0f9a":function(e,n,t){"use strict";t.r(n);t("b0c0"),t("d3b7"),t("498a"),t("96cf");var a=t("1da1"),r=t("c24f"),c=t("5f87"),i=t("a18c"),o={token:Object(c["a"])(),name:"",avatar:"",introduction:"",roles:[]},u={SET_TOKEN:function(e,n){e.token=n},SET_INTRODUCTION:function(e,n){e.introduction=n},SET_NAME:function(e,n){e.name=n},SET_AVATAR:function(e,n){e.avatar=n},SET_ROLES:function(e,n){e.roles=n}},d={login:function(e,n){var t=e.commit,a=n.username,i=n.password;return new Promise((function(e,n){Object(r["a"])({username:a.trim(),password:i}).then((function(n){var a=n.data;t("SET_TOKEN",a.token),Object(c["c"])(a.token),e(n)})).catch((function(e){n(e)}))}))},getInfo:function(e){var n=e.commit,t=e.state;return new Promise((function(e,a){Object(r["d"])(t.token).then((function(t){var r=t.data;r||a("Verification failed, please Login again.");var c=r.roles,i=r.name,o=r.avatar,u=r.introduction;(!c||c.length<=0)&&a("getInfo: roles must be a non-null array!"),n("SET_ROLES",c),n("SET_NAME",i),n("SET_AVATAR",o),n("SET_INTRODUCTION",u),e(r)})).catch((function(e){a(e)}))}))},logout:function(e){var n=e.commit;e.state,e.dispatch;n("SET_TOKEN",""),n("SET_ROLES",[]),Object(c["b"])(),Object(i["c"])(),i["b"].push({path:"/login",query:{redirect:"/"}})},resetToken:function(e){var n=e.commit;return new Promise((function(e){n("SET_TOKEN",""),n("SET_ROLES",[]),Object(c["b"])(),e()}))},changeRoles:function(e,n){var t=e.commit,r=e.dispatch;return new Promise(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(a){var o,u,d,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=n+"-token",t("SET_TOKEN",o),Object(c["c"])(o),e.next=5,r("getInfo");case 5:return u=e.sent,d=u.roles,Object(i["c"])(),e.next=10,r("permission/generateRoutes",d,{root:!0});case 10:l=e.sent,i["b"].addRoutes(l),r("tagsView/delAllViews",null,{root:!0}),a();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}};n["default"]={namespaced:!0,state:o,mutations:u,actions:d}},4360:function(e,n,t){"use strict";t("13d5"),t("d3b7"),t("ac1f"),t("5319"),t("ddb0");var a=t("2b0e"),r=t("2f62"),c=(t("b0c0"),{sidebar:function(e){return e.app.sidebar},size:function(e){return e.app.size},device:function(e){return e.app.device},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},introduction:function(e){return e.user.introduction},roles:function(e){return e.user.roles},articleMenu:function(e){return e.app.articleMenu}}),i=c;a["default"].use(r["a"]);var o=t("c653"),u=o.keys().reduce((function(e,n){var t=n.replace(/^\.\/(.*)\.\w+$/,"$1"),a=o(n);return e[t]=a.default,e}),{}),d=new r["a"].Store({modules:u,getters:i});n["a"]=d},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var a=t("2b0e"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},c=[],i=(t("5c0b"),t("2877")),o={},u=Object(i["a"])(o,r,c,!1,null,null,null),d=u.exports,l=t("a18c"),s=t("4360"),f=(t("0fae"),t("8e1f"),t("5c96")),m=t.n(f),h=t("3f08"),p=t("bc3a"),b=t.n(p),g=t("b2d8"),v=t.n(g),k=(t("64e1"),t("4160"),t("159b"),t("1487")),O=t.n(k),T=(t("eba2"),{install:function(e,n){e.directive("highlight",(function(e){var n=e.querySelectorAll("pre code");n.forEach((function(e){O.a.highlightBlock(e)}))}))}}),E=T,x=t("94d3"),j=t.n(x),S=t("77ed"),w=t.n(S);a["default"].prototype.$http=b.a,a["default"].use(w.a),a["default"].use(v.a),a["default"].use(h["a"].Plugin),a["default"].use(m.a),a["default"].use(E),a["default"].use(j.a),a["default"].config.productionTip=!1,new a["default"]({router:l["b"],store:s["a"],render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,n,t){"use strict";var a=t("9c0c"),r=t.n(a);r.a},"5f87":function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"c",(function(){return o})),t.d(n,"b",(function(){return u}));var a=t("a78e"),r=t.n(a),c="Jianyang-Token";function i(){return r.a.get(c)}function o(e){return r.a.set(c,e)}function u(){return r.a.remove(c)}},"8e1f":function(e,n,t){},"94d3":function(e,n){},"9c0c":function(e,n,t){},a18c:function(e,n,t){"use strict";t("99af");var a=t("2909"),r=t("2b0e"),c=t("8c4f"),i=(t("d3b7"),function(){return t.e("chunk-7b78fc56").then(t.bind(null,"c1f7"))}),o=function(){return t.e("chunk-0521ec4a").then(t.bind(null,"717f"))},u=function(){return t.e("chunk-c2090214").then(t.bind(null,"edb6"))},d=function(){return t.e("chunk-2d0cebfb").then(t.bind(null,"617a"))},l=function(){return t.e("chunk-ab252b2a").then(t.bind(null,"faa7"))},s=function(){return t.e("chunk-3dd690fa").then(t.bind(null,"31bf"))},f=function(){return t.e("chunk-074d6724").then(t.bind(null,"3952"))},m=function(){return t.e("chunk-6893ebdb").then(t.bind(null,"032d"))},h=function(){return t.e("chunk-b8263412").then(t.bind(null,"5cff"))},p=function(){return t.e("chunk-05d6ba00").then(t.bind(null,"1d90"))},b=function(){return t.e("chunk-45883a8c").then(t.bind(null,"089f"))},g=function(){return t.e("chunk-cebb44e0").then(t.bind(null,"dfd4"))},v=function(){return t.e("chunk-27c0c39e").then(t.bind(null,"e378"))},k=[{path:"/admin/login",name:"Login",component:u,hidden:!0},{path:"/admin/404",name:"404",component:d,hidden:!0},{path:"/admin/",name:"AdminHome",component:i,redirect:"/admin/index",children:[{path:"index",name:"Dashboard",component:o,meta:{title:"首页",icon:"el-icon-s-data"}}]},{path:"/admin/personal",name:"Personal",component:i,redirect:"/admin/personal/index",children:[{path:"index",name:"Personal-home",component:l,meta:{title:"个人中心"},hidden:!0}]},{path:"/admin/driver",name:"Driver",component:i,redirect:"/admin/driver/index",children:[{path:"index",name:"Driver-home",component:s,meta:{title:"引导指南",icon:"el-icon-s-flag"}}]},{path:"/admin/article",name:"Article",component:i,redirect:"/admin/article/add",meta:{title:"文章",icon:"el-icon-tickets"},children:[{path:"add",name:"Add article",component:f,meta:{title:"写文章",icon:"el-icon-edit"}},{path:"manage",name:"Manage article",component:m,meta:{title:"文章管理",icon:"el-icon-s-management"}},{path:"delete",name:"Delete article",component:h,meta:{title:"回收站",icon:"el-icon-delete"}}]},{path:"/admin/article_detail",name:"article_detail",component:i,redirect:"/admin/article_detail/index",children:[{path:"index",name:"article_detail",component:p,meta:{title:"文章详情"},hidden:!0}]},{path:"/admin/tag",name:"Tag",component:i,redirect:"/admin/tag/index",children:[{path:"index",name:"Manage Tag",component:b,meta:{title:"分类/标签",icon:"el-icon-collection-tag"}}]},{path:"/admin/comment",name:"Comment",component:i,redirect:"/admin/comment/index",children:[{path:"index",name:"Manage Comment",component:g,meta:{title:"评论",icon:"el-icon-chat-line-round"}}]},{path:"/admin/user",name:"User",component:i,redirect:"/admin/user/index",children:[{path:"index",name:"Manage User",component:v,meta:{title:"用户",icon:"el-icon-user"}}]}],O=function(){return t.e("chunk-989e22c6").then(t.bind(null,"ba65"))},T=function(){return t.e("chunk-7aeac504").then(t.bind(null,"0dc0"))},E=function(){return t.e("chunk-31ab313d").then(t.bind(null,"8695"))},x=function(){return t.e("chunk-8a71f3b4").then(t.bind(null,"fa47"))},j=function(){return t.e("chunk-866eceba").then(t.bind(null,"fbbc"))},S=function(){return t.e("chunk-e3c27ac4").then(t.bind(null,"40d7"))},w=[{path:"/",name:"BlogHome",component:O,redirect:"/home",children:[{path:"home",name:"Blog-Home",component:T}]},{path:"/tag",name:"BlogTag",component:O,redirect:"/tag/index",children:[{path:"index",name:"Blog-Tag",component:E}]},{path:"/about",name:"BlogAbout",component:O,redirect:"/about/index",children:[{path:"index",name:"Blog-About",component:x}]},{path:"/archives",name:"BlogArchives",component:O,redirect:"/archives/index",children:[{path:"index",name:"Blog-Archives",component:j}]},{path:"/article",name:"BlogArticle",component:O,redirect:"/article/index",children:[{path:"index",name:"Blog-Article",component:S}]}];t.d(n,"a",(function(){return A})),t.d(n,"c",(function(){return R})),r["default"].use(c["a"]);var _=Object(a["a"])(w),A=Object(a["a"])(k),M=function(){return new c["a"]({routes:A,scrollBehavior:function(){return{x:0,y:0}}})};function R(){var e=M();N.matcher=e.matcher}var N=new c["a"]({routes:[].concat(Object(a["a"])(A),Object(a["a"])(_))});n["b"]=N},b775:function(e,n,t){"use strict";t("d3b7"),t("ac1f"),t("5319");var a=t("bc3a"),r=t.n(a),c=t("5c96"),i=t("4360"),o=t("5f87"),u=t("a18c"),d=r.a.create({timeout:5e3});d.interceptors.request.use((function(e){return i["a"].getters.token&&(e.headers["authorization"]=Object(o["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),d.interceptors.response.use((function(e){var n=e.data;return 2e4===n.code||2e4!==n.code&&void 0!==n.key?n:(50008!==n.code&&50012!==n.code&&50014!==n.code||c["MessageBox"].confirm("登陆失效，请重新登陆","登陆失效",{confirmButtonText:"重新登陆",type:"warning"}).then((function(){i["a"].dispatch("user/resetToken").then((function(){u["b"].replace({path:"/admin/login"})}))})),Promise.reject(n.message||"Error"))}),(function(e){return console.log("err"+e),Object(c["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),n["a"]=d},c24f:function(e,n,t){"use strict";t.d(n,"e",(function(){return r})),t.d(n,"a",(function(){return c})),t.d(n,"d",(function(){return i})),t.d(n,"c",(function(){return o})),t.d(n,"f",(function(){return u})),t.d(n,"b",(function(){return d}));var a=t("b775");function r(){return Object(a["a"])({url:"/api/user",method:"get"})}function c(e){return Object(a["a"])({url:"/api/user/login",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/api/user/info",method:"get",params:{token:e}})}function o(e){return Object(a["a"])({url:"/api/user/".concat(e),method:"delete"})}function u(e){return Object(a["a"])({url:"/api/user/".concat(e._id),method:"put",data:e})}function d(e){return Object(a["a"])({url:"/api/user",method:"post",data:e})}},c653:function(e,n,t){var a={"./app.js":"d9cd","./user.js":"0f9a"};function r(e){var n=c(e);return t(n)}function c(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id="c653"},d9cd:function(e,n,t){"use strict";t.r(n);var a=t("2909"),r=(t("a78e"),t("a18c")),c={opend:!1,routes:r["a"],message:!1,articleMenu:!1,articleMenuSource:[],articleMenuTag:"1.",showRightNav:!1,qiniuToken:""},i={toggleOpen:function(e,n){e.opend=n},SET_ROUTES:function(e,n){e.routes=Object(a["a"])(n),e.addRoutes=n},SET_MESSAGE:function(e){e.message=!e.message}},o={setArticleMenu:function(e,n){e.state.articleMenu=n},setArticleMenuSource:function(e,n){e.state.articleMenuSource=n},setArticleMenuTag:function(e,n){e.state.articleMenuTag=n},setShowRightNav:function(e,n){e.state.showRightNav=n}};n["default"]={namespaced:!0,state:c,mutations:i,actions:o}}},[[0,"runtime","chunk-vendors"]]]);
//# sourceMappingURL=app.370b5892.js.map